name: Upgrade NPM packages

on:
    schedule:
        - cron: '0 0 * * *'

jobs:
    upgrade-packages:
        name: Daily upgrade packages job

        runs-on: ubuntu-latest

        steps:
            - name: Checkout 🛎️
              uses: actions/checkout@v4

            - name: Set up Node.js ⚙️
              uses: actions/setup-node@v4
              with:
                  node-version: '21.x'

            - name: Check and update packages (minor) 🔀
              run: |
                  npx npm-check-updates --upgrade --peer --target minor
                  npm i

            - name: Commit and create PR 🔀
              uses: peter-evans/create-pull-request@v5
              with:
                  title: 'build(deps): Upgrade NPM packages (automated)'
                  branch: 'build-deps-upgrade-npm-packages-automated'
                  commit-message: 'build(deps): upgrade NPM packages (automated)'
