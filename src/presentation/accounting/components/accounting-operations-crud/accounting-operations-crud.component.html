<div class="crud-content">
	<form [formGroup]="crudRecordFg">
		<div class="record-crud-section-title">New record:</div>
		<div class="date-section">
			<app-datepicker
				[disabled]="isNotReadyForSaveSignal()"
				placeholder="Choose a opeation date"
				formControlName="operationDate"
			></app-datepicker>
		</div>
		<div class="contractor-section">
			<app-form-field
				formControlName="contractor"
				[fieldType]="'SELECT'"
				[title]="'Contractor:'"
				[selectOptions]="contractorsSignal()"
				[disabled]="isNotReadyForSaveSignal()"
			></app-form-field>

			<button
				(click)="addContractor()"
				mat-fab
				color="primary"
				aria-label="add a contractor"
			>
				<mat-icon>add</mat-icon>
			</button>
		</div>

		<div class="category-section">
			<app-form-field
				formControlName="category"
				[fieldType]="'SELECT'"
				[title]="'Category:'"
				[selectOptions]="categoryNodesSignal()"
				[disabled]="isNotReadyForSaveSignal()"
			></app-form-field>

			<button
				(click)="addCategory()"
				mat-fab
				color="primary"
				aria-label="add a category"
			>
				<mat-icon>add</mat-icon>
			</button>
		</div>

		<ng-container
			#expense
			*ngIf="isExpenseSignal(); else income"
		>
			<div class="expense-section">
				<app-form-field
					formControlName="expense"
					[fieldType]="'INPUT'"
					[title]="'Amount(Expense)::'"
					[disabled]="isNotReadyForSaveSignal()"
				></app-form-field>
			</div>
		</ng-container>

		<ng-template #income>
			<div class="income-section">
				<app-form-field
					formControlName="income"
					[fieldType]="'INPUT'"
					[title]="'Amount(Income):'"
					[disabled]="isNotReadyForSaveSignal()"
				></app-form-field>
			</div>
		</ng-template>

		<div class="comment-section">
			<app-form-field
				formControlName="comment"
				[fieldType]="'TEXT_AREA'"
				[title]="'Comments:'"
				[disabled]="isNotReadyForSaveSignal()"
			></app-form-field>
		</div>
		<div class="command-buttons">
			<app-button
				[isDisabled]="isNotReadyForSaveSignal()"
				(click)="applyChangesAsync()"
				type="fab"
				text="Apply changes"
				color="primary"
				icon="save"
			></app-button>
			<app-button
				[hidden]="false"
				(click)="addRecordAsync()"
				type="fab"
				text="Add new"
				color="accent"
				icon="add_circle_outline"
			></app-button>
			<app-button
				(click)="deleteRecordAsync()"
				type="fab"
				text="Delete"
				color="warn"
				icon="delete_forever"
			></app-button>
		</div>
	</form>
</div>
